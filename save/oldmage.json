{
  "id": "mage",
  "name": "Mage",
  "description": "Lanceur d'art arcane basé sur l'intelligence",
  "features": [
    {
      "id": "mage_spellcasting_lv1",
      "type": "spellcasting_feature",
      "source": "mage",
      "priority": 80,
      "payload": {
        "ability": "intelligence",
        "spell_save_dc_mod": 0,
        "spell_attack_mod": 0,
        "slots_table": { "1": 2 },
        "description": "emplacements de mage niveau 1"
      }
    },
    {
      "id": "mage_spell_choice_1",
      "type": "choice",
      "source": "Choix des sorts de niveau 1",
      "payload": {
        "ui_id": "classe_test_spell_choice",
        "category": "spell",
        "choose": 2,
        "auto_from": {
          "collection": "spells",
          "filters": { "level": 1 },
          "id_fields": ["id", "slug"],
          "label_fields": ["name", "nom"]
        }
      }   
    },
    {
      "id": "mage_spell_choice_0",
      "type": "choix",
      "source": "Choix des sorts de niveau 0 ",
      "payload": {
        "ui_id": "classe_test_spell_choice",
        "category": "spell",
        "choose": 3,
        "auto_from": {
          "collection": "spells",
          "filters": { "level": 0 },
          "id_fields": ["id", "slug"],
          "label_fields": ["name", "nom"]
           }
          }
        },
    {
      "id": "mage_choice_school",
      "type": "choice",
      "source": "mage",
      "priority": 50,
      "conditions": {
        "all": [
          { "kind": "level_gte", "class": "mage", "value": 2 }
        ]
      },
      "payload": {
        "ui_id": "mage_subclass",
        "category": "subclasses",
        "choose": 1,
        "auto_from": {
          "collection": "subclasses",
          "filters": { "class_id": "mage" },
          "id_fields": ["id", "slug"],
          "label_fields": ["name", "nom"]
        }
      }
    },
    {
      "id": "mage_slots_up_to_5",
      "type": "spellcasting_feature",
      "source": "mage",
      "priority": 30,
      "conditions": {
        "all": [
          { "kind": "level_gte", "class": "mage", "value": 5 }
        ]
      },
      "payload": {
        "ability": "intelligence",
        "spell_save_dc_mod": 0,
        "spell_attack_mod": 0,
        "slots_table": { "1": 4, "2": 3, "3": 2 },
        "description": "Mise à jour des emplacements (mage niveau 5)"
      }
    },
    {
      "id": "mage_extra_spells_lv3_known",
      "type": "grant_feature",
      "source": "mage",
      "priority": 25,
      "conditions": {
        "all": [
          { "kind": "level_gte", "class": "mage", "value": 5 }
        ]
      },
      "payload": {
        "feature_id": "mage_known_fireball_lv3",
        "apply_immediately": true
      }
    }
  ]
}
