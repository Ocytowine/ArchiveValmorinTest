[
    {
      "id": "style-de-combat",
      "short_name": "Style",
      "nom": "Style de combat",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": { "classes": ["guerrier"], "sous_classes": [], "races": [], "backgrounds": [], "items": [] },
      "niveau_acquisition": 1,
      "prerequis": [{"type":"classe","valeur":"guerrier"}],
      "mecanique": {
        "action_type": "none",
        "activation": "passif",
        "triggers": [],
        "portee_m": null,
        "zone": null,
        "duree": "passif",
        "concentration_required": false,
        "casting_time": null,
        "ritual_allowed": false,
        "components": {"verbal": false, "somatic": false, "material": false, "materials_required": []},
        "utilisations": {"nb": null, "par": "illimite", "recharge": null, "resource_pool_id": null},
        "resource_pools": [],
        "jets": {"attaque":"arme","caracteristique":"STR|DEX","dd_sauvegarde":null,"sauvegarde_carac":null,"avantage":null,"desavantage":null},
        "degats": {"des": null, "type": null, "progression": []},
        "scaling_by_level": [],
        "grants_spells": [],
        "granted_proficiencies": {"skills": [], "tools": [], "languages": [], "armor": [], "weapons": [], "saves": []},
        "modifiers": {"atk_bonus": 0, "dmg_bonus": {"amount":0,"type":null}, "ac_bonus": 0, "speed_mod": 0, "advantage_on": []},
        "immunities": {"damage_types":[], "conditions":[]},
        "resistances": {"damage_types":[], "conditions":[]},
        "vulnerabilities": {"damage_types":[], "conditions":[]},
        "effects": [{"categorie":"buff","resume":"Choisir un style de combat procurant un bonus spécifique (ex: +1 dégât d'arme ou +1 CA)","conditions":[],"notes":"Choix au niveau 1 ; implémenter variantes (duel, archery, defense...)"}],
        "empilement": {"cumulable": false, "stack_rule": "no_stack", "exclut": [], "ne_se_cumule_pas_avec": []},
        "balises": ["combat","guerrier"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Au niveau 1, vous choisissez un style de combat qui vous confère un petit avantage permanent (ex. +1 aux dégâts d'une arme dédiée ou +1 CA avec bouclier).",
      "summary": "Choix d'un style offrant un petit bonus passif.",
      "examples": ["Duel: +1 aux dégâts en combat rapproché", "Défense: +1 CA lorsque vous portez une armure"],
      "i18n": { "fr": {"nom":"Style de combat","texte":"Au niveau 1...","summary":"Choix d'un style offrant un petit bonus passif."} },
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_style","order_hint":100,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "seconde-souffle",
      "short_name": "Seconde souffle",
      "nom": "Seconde souffle",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": { "classes": ["guerrier"], "sous_classes": [], "races": [], "backgrounds": [], "items": [] },
      "niveau_acquisition": 1,
      "prerequis": [{"type":"classe","valeur":"guerrier"}],
      "mecanique": {
        "action_type": "action",
        "activation": "action",
        "triggers": ["on_short_rest"],
        "duree": "instantane",
        "concentration_required": false,
        "components": {"verbal": false,"somatic": false,"material": false,"materials_required":[]},
        "utilisations": {"nb":1,"par":"repos_court","recharge":"short_rest","resource_pool_id":null},
        "resource_pools": [],
        "jets": {"attaque":"aucun","caracteristique":null,"dd_sauvegarde":null,"sauvegarde_carac":null,"avantage":null,"desavantage":null},
        "degats": {"des": null,"type": null,"progression":[]},
        "effects": [{"categorie":"defense","resume":"Récupère des PV égaux à 1d10 + niveau de guerrier","conditions":[],"notes":"Utilisable 1 fois par repos court"}],
        "modifiers": {"atk_bonus":0,"dmg_bonus":{"amount":0,"type":null},"ac_bonus":0,"speed_mod":0,"advantage_on":[]},
        "empilement": {"cumulable":false,"stack_rule":"no_stack","exclut":[],"ne_se_cumule_pas_avec":[]},
        "balises":["soin","repos_court"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Vous pouvez utiliser une action pour regagner 1d10 + votre niveau de guerrier en PV. Recharge après un repos court.",
      "summary": "Soigne partiellement (1d10 + niveau) — recharge repos court.",
      "examples": ["Niveau 3 guerrier : regagne 1d10+3 PV une fois par repos court."],
      "i18n": { "fr": {"nom":"Seconde souffle","texte":"Vous pouvez utiliser...","summary":"Soigne partiellement (1d10 + niveau) — recharge repos court."} },
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_heal","order_hint":110,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "assaut",
      "short_name": "Assaut",
      "nom": "Assaut",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": { "classes": ["guerrier"], "sous_classes": [], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 2,
      "prerequis": [{"type":"classe","valeur":"guerrier"},{"type":"niveau_classe","classe":"guerrier","min":2}],
      "mecanique": {
        "action_type": "bonus_action",
        "activation": "action_bonus",
        "triggers": ["on_attack_hit"],
        "duree": "instantane",
        "concentration_required": false,
        "components": {"verbal": false,"somatic": false,"material": false,"materials_required":[]},
        "utilisations": {"nb":null,"par":"illimite","recharge":null,"resource_pool_id":null},
        "effects": [{"categorie":"buff","resume":"Quand vous touchez avec une attaque, vous pouvez faire un déplacement court gratuit ou infliger un petit bonus de dégâts.","conditions":[],"notes":"Implémentation: soit +2 dégâts, soit avancer de 3m sans provoquer d'attaque d'opportunité (selon choix du joueur)"}],
        "balises":["mobilite","offense"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Au niveau 2, vous pouvez, lorsque vous touchez, effectuer un petit effet additionnel : infliger +2 dégâts ou déplacer 3 m sans provoquer d'attaque d'opportunité.",
      "summary": "Petit bonus offensif ou mobilité après coup.",
      "examples": ["Touche -> +2 dégâts OU avance 3 m sans AoO."],
      "i18n": {"fr": {"nom":"Assaut","texte":"Au niveau 2...","summary":"Petit bonus offensif ou mobilité après coup."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_assault","order_hint":120,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "critique-ameliore",
      "short_name": "Critique amélioré",
      "nom": "Critique amélioré",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["guerrier"], "sous_classes": ["champion"], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 3,
      "prerequis": [{"type":"sous_classe","valeur":"champion"}],
      "mecanique": {
        "action_type": "passif",
        "activation": "passif",
        "triggers": [],
        "duree": "passif",
        "concentration_required": false,
        "effects": [{"categorie":"buff","resume":"Vos coups critiques arrivent plus facilement: le seuil de critique est abaissé (ex: 19-20).","conditions":[],"notes":"Adapter le seuil selon règle maison."}],
        "balises":["critique","guerrier","champion"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Au niveau 3 (Champion), vos attaques infligent un coup critique sur 19-20 (au lieu de 20).",
      "summary": "Abaît le seuil de critique (19-20).",
      "examples": ["Niveau 3 champion: critique sur 19-20."],
      "i18n": {"fr":{"nom":"Critique amélioré","texte":"Au niveau 3...","summary":"Abaît le seuil de critique (19-20)."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_crit","order_hint":200,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "berserker-rage",
      "short_name": "Rage (Berserker)",
      "nom": "Rage berserk",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["guerrier"], "sous_classes": ["berserker"], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 3,
      "prerequis": [{"type":"sous_classe","valeur":"berserker"}],
      "mecanique": {
        "action_type": "bonus_action",
        "activation": "action_bonus",
        "triggers": [],
        "duree": "n_rounds",
        "concentration_required": false,
        "utilisations": {"nb":1,"par":"repos_long","recharge":"long_rest","resource_pool_id":null},
        "effects": [{"categorie":"buff","resume":"Gain d'un bonus de dégâts et résistance partielle aux dégâts pendant n rounds.","conditions":[],"notes":"Ex: +2 aux dégâts de mêlée, résistance aux dégâts contondants/tranchants/perforants pour 1 minute."}],
        "balises":["rage","berserker","buff"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "En tant que Berserker, vous pouvez entrer en rage une fois par repos long : vous gagnez +2 aux dégâts de mêlée et résistance aux dégâts physiques pendant 1 minute.",
      "summary": "Rage : +dégâts et résistances (1/min) — recharge repos long.",
      "examples": ["Utilisation: Bonus action -> Rage active."],
      "i18n": {"fr":{"nom":"Rage berserk","texte":"En tant que Berserker...","summary":"Rage : +dégâts et résistances (1/min)."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_rage","order_hint":210,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "frappe-furieuse",
      "short_name": "Frappe furieuse",
      "nom": "Frappe furieuse",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["guerrier"], "sous_classes": ["berserker"], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 6,
      "prerequis": [{"type":"sous_classe","valeur":"berserker"},{"type":"niveau_classe","classe":"guerrier","min":6}],
      "mecanique": {
        "action_type": "action",
        "activation": "action",
        "triggers": ["on_attack_hit"],
        "duree": "instantane",
        "concentration_required": false,
        "effects": [{"categorie":"offense","resume":"Quand vous touchez en rage, vous pouvez ajouter un dé de dégâts supplémentaire.","conditions":[],"notes":"Ex: +1d6 dégâts une fois par attaque pendant la rage."}],
        "balises":["offense","berserker"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Au niveau 6 (Berserker), vos attaques pendant la rage infligent un dé de dégâts additionnel une fois par attaque.",
      "summary": "Ajoute un dé de dégâts supplémentaire pendant la rage.",
      "examples": ["Attaque en rage -> +1d6 dégâts additionnels."],
      "i18n": {"fr":{"nom":"Frappe furieuse","texte":"Au niveau 6...","summary":"Ajoute un dé de dégâts pendant la rage."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_fury","order_hint":220,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "lancer-de-sort",
      "short_name": "Lancer de sort",
      "nom": "Lancer de sort",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["mage"], "sous_classes": [], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 1,
      "prerequis": [{"type":"classe","valeur":"mage"}],
      "mecanique": {
        "action_type": "action",
        "activation": "action",
        "triggers": [],
        "duree": "varie",
        "concentration_required": null,
        "components": {"verbal": true,"somatic": true,"material": true,"materials_required":[]},
        "utilisations": {"nb":null,"par":"illimite","recharge":null,"resource_pool_id":"spell_slots"},
        "resource_pools": [{"id":"spell_slots","name":"Emplacements de sorts","max":null,"recharge":"long_rest"}],
        "jets": {"attaque":"sort","caracteristique":"INT","dd_sauvegarde":null,"sauvegarde_carac":"INT","avantage":null,"desavantage":null},
        "effects": [{"categorie":"detection | utilitaire | offense","resume":"Permet de lancer des sorts connus en consommant des emplacements.","conditions":[],"notes":"Gérer emplacements et listes de sorts séparément."}],
        "balises":["sorts","mage","arcane"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Vous savez lancer des sorts et utilisez des emplacements de sorts pour les activer. La caractéristique de lancement est Intelligence.",
      "summary": "Permet de lancer des sorts (carac INT).",
      "examples": ["Sorts préparés / emplacements : gérer en module 'spells'."],
      "i18n": {"fr":{"nom":"Lancer de sort","texte":"Vous savez lancer des sorts...","summary":"Permet de lancer des sorts (carac INT)."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_spell","order_hint":300,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "arcane-shield",
      "short_name": "Bouclier arcanique",
      "nom": "Bouclier arcanique",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["mage"], "sous_classes": [], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 2,
      "prerequis": [{"type":"classe","valeur":"mage"},{"type":"niveau_classe","classe":"mage","min":2}],
      "mecanique": {
        "action_type": "reaction",
        "activation": "reaction",
        "triggers": ["on_being_attacked"],
        "duree": "instantane",
        "concentration_required": false,
        "utilisations": {"nb":null,"par":"illimite","recharge":null,"resource_pool_id":null},
        "effects": [{"categorie":"defense","resume":"Gagnez un bonus d'AC temporaire lorsqu'une attaque vous vise.","conditions":[],"notes":"Ex: +5 AC jusqu'à la fin du round (consommer une réaction)."}],
        "balises":["defense","mage"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "À partir du niveau 2, vous pouvez utiliser votre réaction pour augmenter votre CA temporairement lorsqu'une attaque vous vise (ex: +5 CA jusqu'à la fin du round).",
      "summary": "Réaction : +AC temporaire contre une attaque.",
      "examples": ["Utiliser la réaction -> +5 CA jusqu'à la fin du tour."],
      "i18n": {"fr":{"nom":"Bouclier arcanique","texte":"À partir du niveau 2...","summary":"Réaction : +AC temporaire."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_shield_magic","order_hint":310,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "evocation-flexible",
      "short_name": "Évocation flexible",
      "nom": "Évocation flexible",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["mage"], "sous_classes": ["evocateur"], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 2,
      "prerequis": [{"type":"sous_classe","valeur":"evocateur"}],
      "mecanique": {
        "action_type": "passif",
        "activation": "passif",
        "triggers": [],
        "duree": "passif",
        "effects": [{"categorie":"offense","resume":"Vos sorts d'évocation peuvent éviter d'affecter alliés dans la zone selon un jet ou règles maison.","conditions":[],"notes":"Implémenter zone friendly-fire reduction pour évocations."}],
        "balises":["evocation","mage","zone"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Les sorts d'évocation que vous lancez peuvent être réglés pour minimiser les dégâts subis par les alliés proches (règle maison : alliés à l'intérieur de la zone sont sauvegardés automatiquement selon distance).",
      "summary": "Réduit l'impact des évocations sur alliés proches.",
      "i18n": {"fr":{"nom":"Évocation flexible","texte":"Les sorts d'évocation...","summary":"Réduit l'impact des évocations sur alliés proches."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_evocation","order_hint":320,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "overchannel-evocation",
      "short_name": "Overchannel",
      "nom": "Surcharge d'évocation",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["mage"], "sous_classes": ["evocateur"], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 10,
      "prerequis": [{"type":"sous_classe","valeur":"evocateur"},{"type":"niveau_classe","classe":"mage","min":10}],
      "mecanique": {
        "action_type": "action",
        "activation": "action",
        "triggers": [],
        "duree": "instantane",
        "utilisations": {"nb":1,"par":"repos_long","recharge":"long_rest","resource_pool_id":null},
        "effects": [{"categorie":"offense","resume":"Permet d'augmenter fortement les dégâts d'un sort d'évocation en échange d'un coût (pv, risque de débordement).","conditions":[],"notes":"Implémenter règle maison pour dégâts bonus et contrepartie (ex: 2d12 dégâts bonus, risque de stress magique)."}],
        "balises":["overchannel","evocation","offense"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Au niveau 10, vous pouvez utiliser cette capacité une fois par repos long pour augmenter fortement les dégâts d'un sort d'évocation, au prix d'un coût (ex: subir des dégâts ou risque d'effets secondaires).",
      "summary": "Boost énorme d'un sort d'évocation — coût en contrepartie.",
      "i18n": {"fr":{"nom":"Surcharge d'évocation","texte":"Au niveau 10...","summary":"Boost énorme d'un sort d'évocation — coût."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_overchannel","order_hint":330,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "charme-subtil",
      "short_name": "Charme subtil",
      "nom": "Charme subtil",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["mage"], "sous_classes": ["enchanter"], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 2,
      "prerequis": [{"type":"sous_classe","valeur":"enchanter"}],
      "mecanique": {
        "action_type": "action",
        "activation": "action",
        "triggers": [],
        "duree": "varie",
        "concentration_required": true,
        "utilisations": {"nb":null,"par":"illimite","recharge":null,"resource_pool_id":null},
        "effects": [{"categorie":"controle","resume":"Améliore les effets de charme et illusions sur une cible (ex: bonus au DD de sauvegarde des ennemis pour résister).","conditions":[],"notes":"Fonctionne pour sorts qui charm/instillent des émotions."}],
        "balises":["charme","enchantement"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "L'Enchanteur manipule les émotions : ses sorts de charme sont plus difficiles à résister et peuvent durer plus longtemps selon la puissance du lanceur.",
      "summary": "Renforce les sorts de charme (DD plus élevé ou durée augmentée).",
      "i18n": {"fr":{"nom":"Charme subtil","texte":"L'Enchanteur manipule...","summary":"Renforce les sorts de charme."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_charm","order_hint":340,"display_rules":{"collapsed_by_default":false}}
    },
    {
      "id": "maitrise-des-affectations",
      "short_name": "Maîtrise des affectations",
      "nom": "Maîtrise des affectations",
      "type": "class_feature",
      "canonical": true,
      "version": "1.0",
      "applique_a": {"classes": ["mage"], "sous_classes": ["enchanter"], "races": [], "backgrounds": [], "items": []},
      "niveau_acquisition": 6,
      "prerequis": [{"type":"sous_classe","valeur":"enchanter"},{"type":"niveau_classe","classe":"mage","min":6}],
      "mecanique": {
        "action_type": "action",
        "activation": "action",
        "triggers": [],
        "duree": "concentration",
        "concentration_required": true,
        "utilisations": {"nb":null,"par":"illimite","recharge":null,"resource_pool_id":null},
        "effects": [{"categorie":"controle","resume":"Capacité avancée pour manipuler plusieurs cibles charmées ou inverser effets d'enchantement.","conditions":[],"notes":"Règle maison : transférer un effet de charme d'une cible à une autre pendant la concentration."}],
        "balises":["enchantement","controle"],
        "links": {"grants_feature_ids": [], "requires_feature_ids": [], "replaces_feature_ids": []}
      },
      "texte": "Au niveau 6, vous pouvez manipuler plus finement les effets d'enchantement : ex. transférer ou renforcer l'effet sur d'autres cibles pendant la concentration.",
      "summary": "Contrôle avancé des effets d'enchantement.",
      "i18n": {"fr":{"nom":"Maîtrise des affectations","texte":"Au niveau 6...","summary":"Contrôle avancé des enchantements."}},
      "metadata": {"author":"auto","created_at":"2025-09-17","updated_at":"2025-09-17","visibility":"homebrew"},
      "ui": {"icon_id":"icon_enchant_master","order_hint":350,"display_rules":{"collapsed_by_default":false}}
    }
  ]
  